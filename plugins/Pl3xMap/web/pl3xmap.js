(()=>{var t={962:()=>{},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},r=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=s(p,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:g,references:1})}r.push(u)}return r}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var o=i(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var a=n(o[r]);e[a].references--}for(var l=i(t,s),c=0;c<o.length;c++){var d=n(o[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},854:function(t,e,n){t.exports=function(){"use strict";var t=function(t){var e=t.id,n=t.viewBox,i=t.content;this.id=e,this.viewBox=n,this.content=i};t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};function e(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var i=e((function(t,e){t.exports=function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,i){return i&&!0===i.clone&&t(n)?o(e(n),n,i):n}function i(e,i,s){var r=e.slice();return i.forEach((function(i,a){void 0===r[a]?r[a]=n(i,s):t(i)?r[a]=o(e[a],i,s):-1===e.indexOf(i)&&r.push(n(i,s))})),r}function s(e,i,s){var r={};return t(e)&&Object.keys(e).forEach((function(t){r[t]=n(e[t],s)})),Object.keys(i).forEach((function(a){t(i[a])&&e[a]?r[a]=o(e[a],i[a],s):r[a]=n(i[a],s)})),r}function o(t,e,o){var r=Array.isArray(e),a=(o||{arrayMerge:i}).arrayMerge||i;return r?Array.isArray(t)?a(t,e,o):n(e,o):s(t,e,o)}return o.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return o(t,n,e)}))},o}()})),s=e((function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default})),o=s.svg,r=s.xlink,a={};a[o.name]=o.uri,a[r.name]=r.uri;var l=function(t,e){return void 0===t&&(t=""),"<svg "+function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(i(a,e||{}))+">"+t+"</svg>"},c=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var t=this.stringify();return function(t){var e=!!document.importNode,n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(n,!0):n}(l(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(t);return c}()},348:function(t,e,n){t.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var e=t((function(t,e){t.exports=function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,i){return i&&!0===i.clone&&t(n)?o(e(n),n,i):n}function i(e,i,s){var r=e.slice();return i.forEach((function(i,a){void 0===r[a]?r[a]=n(i,s):t(i)?r[a]=o(e[a],i,s):-1===e.indexOf(i)&&r.push(n(i,s))})),r}function s(e,i,s){var r={};return t(e)&&Object.keys(e).forEach((function(t){r[t]=n(e[t],s)})),Object.keys(i).forEach((function(a){t(i[a])&&e[a]?r[a]=o(e[a],i[a],s):r[a]=n(i[a],s)})),r}function o(t,e,o){var r=Array.isArray(e),a=(o||{arrayMerge:i}).arrayMerge||i;return r?Array.isArray(t)?a(t,e,o):n(e,o):s(t,e,o)}return o.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return o(t,n,e)}))},o}()}));var i=t((function(t,e){e.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},t.exports=e.default})),s=i.svg,o=i.xlink,r={};r[s.name]=s.uri,r[o.name]=o.uri;var a,l=function(t,n){return void 0===t&&(t=""),"<svg "+function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(e(r,n||{}))+">"+t+"</svg>"},c=i.svg,d=i.xlink,u={attrs:(a={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},a[c.name]=c.uri,a[d.name]=d.uri,a)},h=function(t){this.config=e(u,t||{}),this.symbols=[]};h.prototype.add=function(t){var e=this.symbols,n=this.find(t.id);return n?(e[e.indexOf(n)]=t,!1):(e.push(t),!0)},h.prototype.remove=function(t){var e=this.symbols,n=this.find(t);return!!n&&(e.splice(e.indexOf(n),1),n.destroy(),!0)},h.prototype.find=function(t){return this.symbols.filter((function(e){return e.id===t}))[0]||null},h.prototype.has=function(t){return null!==this.find(t)},h.prototype.stringify=function(){var t=this.config.attrs,e=this.symbols.map((function(t){return t.stringify()})).join("");return l(e,t)},h.prototype.toString=function(){return this.stringify()},h.prototype.destroy=function(){this.symbols.forEach((function(t){return t.destroy()}))};var p=function(t){var e=t.id,n=t.viewBox,i=t.content;this.id=e,this.viewBox=n,this.content=i};p.prototype.stringify=function(){return this.content},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var g=function(t){var e=!!document.importNode,n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(n,!0):n},m=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var t=this.stringify();return g(l(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(p),_={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},f=function(t){return Array.prototype.slice.call(t,0)},v=function(){return/firefox/i.test(navigator.userAgent)},y=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},b=function(){return/edge/i.test(navigator.userAgent)},w=function(t){return(t||window.location.href).split("#")[0]},x=function(t){angular.module("ng").run(["$rootScope",function(e){e.$on("$locationChangeSuccess",(function(e,n,i){var s,o,r;s=t,o={oldUrl:i,newUrl:n},(r=document.createEvent("CustomEvent")).initCustomEvent(s,!1,!1,o),window.dispatchEvent(r)}))}])},k=function(t,e){return void 0===e&&(e="linearGradient, radialGradient, pattern, mask, clipPath"),f(t.querySelectorAll("symbol")).forEach((function(t){f(t.querySelectorAll(e)).forEach((function(e){t.parentNode.insertBefore(e,t)}))})),t};var O=i.xlink.uri,L="xlink:href",E=/[{}|\\\^\[\]`"<>]/g;function j(t){return t.replace(E,(function(t){return"%"+t[0].charCodeAt(0).toString(16).toUpperCase()}))}var M,C=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],A=C.map((function(t){return"["+t+"]"})).join(","),T=function(t,e,n,i){var s,o,r=j(n),a=j(i);(s=t.querySelectorAll(A),o=function(t){var e=t.localName,n=t.value;return-1!==C.indexOf(e)&&-1!==n.indexOf("url("+r)},f(s).reduce((function(t,e){if(!e.attributes)return t;var n=f(e.attributes),i=o?n.filter(o):n;return t.concat(i)}),[])).forEach((function(t){return t.value=t.value.replace(new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),a)})),function(t,e,n){f(t).forEach((function(t){var i=t.getAttribute(L);if(i&&0===i.indexOf(e)){var s=i.replace(e,n);t.setAttributeNS(O,L,s)}}))}(e,r,a)},P="mount",I="symbol_mount",z=function(t){function n(n){var i=this;void 0===n&&(n={}),t.call(this,e(_,n));var s,o=(s=s||Object.create(null),{on:function(t,e){(s[t]||(s[t]=[])).push(e)},off:function(t,e){s[t]&&s[t].splice(s[t].indexOf(e)>>>0,1)},emit:function(t,e){(s[t]||[]).map((function(t){t(e)})),(s["*"]||[]).map((function(n){n(t,e)}))}});this._emitter=o,this.node=null;var r=this.config;if(r.autoConfigure&&this._autoConfigure(n),r.syncUrlsWithBaseTag){var a=document.getElementsByTagName("base")[0].getAttribute("href");o.on(P,(function(){return i.updateUrls("#",a)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,r.listenLocationChangeEvent&&window.addEventListener(r.locationChangeEvent,l),r.locationChangeAngularEmitter&&x(r.locationChangeEvent),o.on(P,(function(t){r.moveGradientsOutsideSymbol&&k(t)})),o.on(I,(function(t){var e;r.moveGradientsOutsideSymbol&&k(t.parentNode),(y()||b())&&(e=[],f(t.querySelectorAll("style")).forEach((function(t){t.textContent+="",e.push(t)})))}))}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},n.prototype._autoConfigure=function(t){var e=this.config;void 0===t.syncUrlsWithBaseTag&&(e.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===t.locationChangeAngularEmitter&&(e.locationChangeAngularEmitter=void 0!==window.angular),void 0===t.moveGradientsOutsideSymbol&&(e.moveGradientsOutsideSymbol=v())},n.prototype._handleLocationChange=function(t){var e=t.detail,n=e.oldUrl,i=e.newUrl;this.updateUrls(n,i)},n.prototype.add=function(e){var n=t.prototype.add.call(this,e);return this.isMounted&&n&&(e.mount(this.node),this._emitter.emit(I,e.node)),n},n.prototype.attach=function(t){var e=this,n=this;if(n.isMounted)return n.node;var i="string"==typeof t?document.querySelector(t):t;return n.node=i,this.symbols.forEach((function(t){t.mount(n.node),e._emitter.emit(I,t.node)})),f(i.querySelectorAll("symbol")).forEach((function(t){var e=m.createFromExistingNode(t);e.node=t,n.add(e)})),this._emitter.emit(P,i),i},n.prototype.destroy=function(){var t=this,e=t.config,n=t.symbols,i=t._emitter;n.forEach((function(t){return t.destroy()})),i.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},n.prototype.mount=function(t,e){void 0===t&&(t=this.config.mountTo),void 0===e&&(e=!1);var n=this;if(n.isMounted)return n.node;var i="string"==typeof t?document.querySelector(t):t,s=n.render();return this.node=s,e&&i.childNodes[0]?i.insertBefore(s,i.childNodes[0]):i.appendChild(s),this._emitter.emit(P,s),s},n.prototype.render=function(){return g(this.stringify())},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},n.prototype.updateUrls=function(t,e){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return T(this.node,n,w(t)+"#",w(e)+"#"),!0},Object.defineProperties(n.prototype,i),n}(h),S=t((function(t){var e;e=function(){var t,e=[],n=document,i=n.documentElement.doScroll,s="DOMContentLoaded",o=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(s,t=function(){for(n.removeEventListener(s,t),o=1;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}},t.exports=e()})),R="__SVG_SPRITE_NODE__",U="__SVG_SPRITE__";window[U]?M=window[U]:(M=new z({attrs:{id:R,"aria-hidden":"true"}}),window[U]=M);var D=function(){var t=document.getElementById(R);t?M.attach(t):M.mount(document.body,!0)};return document.body?D():S(D),M}()},108:()=>{L.SVG.include({_updateEllipse:function(t){var e=t._radiusX,n=t._radiusY,i=t._tiltDeg,s=t._endPointParams,o="M"+s.x0+","+s.y0+"A"+e+","+n+","+i+","+s.largeArc+","+s.sweep+","+s.x1+","+s.y1+" z";this._setPath(t,o)}}),L.Canvas.include({_updateEllipse:function(t){if(!t._empty()){var e=t._point,n=this._ctx,i=t._radiusX,s=(t._radiusY||i)/i;if(this.hasOwnProperty("_drawnLayers"))this._drawnlayers[t._leaflet_id]=t;else{if(!this.hasOwnProperty("_layers"))throw new Error("Cannot find property _drawnLayers or _layers");this._layers[t._leaflet_id]=t}n.save(),n.translate(e.x,e.y),0!==t._tilt&&n.rotate(t._tilt),1!==s&&n.scale(1,s),n.beginPath(),n.arc(0,0,i,0,2*Math.PI),n.restore(),this._fillStroke(n,t)}}}),L.Ellipse=L.Path.extend({options:{fill:!0,startAngle:0,endAngle:359.9},initialize:function(t,e,n,i){L.setOptions(this,i),this._latlng=L.latLng(t),this._tiltDeg=n||0,e&&(this._mRadiusX=e[0],this._mRadiusY=e[1])},setRadius:function(t){return this._mRadiusX=t[0],this._mRadiusY=t[1],this.redraw()},getRadius:function(){return new L.point(this._mRadiusX,this._mRadiusY)},setTilt:function(t){return this._tiltDeg=t,this.redraw()},getBounds:function(){var t=this._getLngRadius(),e=this._getLatRadius(),n=this._latlng;return new L.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setStyle:L.Path.prototype.setStyle,_project:function(){var t=this._getLngRadius(),e=this._getLatRadius(),n=this._latlng,i=this._map.latLngToLayerPoint([n.lat,n.lng-t]),s=this._map.latLngToLayerPoint([n.lat-e,n.lng]);this._point=this._map.latLngToLayerPoint(n),this._radiusX=Math.abs(this._point.x-i.x),this._radiusY=Math.abs(s.y-this._point.y),this._tilt=Math.PI*this._tiltDeg/180,this._endPointParams=this._centerPointToEndPoint(),this._updateBounds()},_updateBounds:function(){var t=Math.sin(this._tilt),e=Math.cos(this._tilt),n=t*t,i=e*e,s=this._radiusX*this._radiusX,o=this._radiusY*this._radiusY,r=Math.sqrt(s*i+o*n),a=Math.sqrt(s*n+o*i),l=this._clickTolerance(),c=[r+l,a+l];this._pxBounds=new L.Bounds(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateEllipse(this)},_getLatRadius:function(){return this._map.options.crs.infinite?this._mRadiusY:this._mRadiusY/40075017*360},_getLngRadius:function(){return this._map.options.crs.infinite?this._mRadiusX:this._mRadiusX/40075017*360/Math.cos(Math.PI/180*this._latlng.lat)},_centerPointToEndPoint:function(){var t=this._point,e=this._radiusX,n=this._radiusY,i=(this.options.startAngle+this.options.endAngle)*(Math.PI/180),s=this.options.startAngle*(Math.PI/180),o=this.options.endAngle,r=this._tiltDeg*(Math.PI/180);return{x0:t.x+Math.cos(r)*e*Math.cos(s)+Math.sin(-r)*n*Math.sin(s),y0:t.y+Math.sin(r)*e*Math.cos(s)+Math.cos(r)*n*Math.sin(s),tilt:r,largeArc:o>180?1:0,sweep:o>0?1:0,x1:t.x+Math.cos(r)*e*Math.cos(i)+Math.sin(-r)*n*Math.sin(i),y1:t.y+Math.sin(r)*e*Math.cos(i)+Math.cos(r)*n*Math.sin(i)}},_empty:function(){return this._radiusX&&this._radiusY&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){var e=Math.sin(this._tilt),n=Math.cos(this._tilt),i=t.x-this._point.x,s=t.y-this._point.y,o=n*i+e*s,r=e*i-n*s;if(!1===this.options.fill){var a=this._radiusX-this.options.weight,l=this._radiusY-this.options.weight;if(o*o/(a*a)+r*r/(l*l)<=1)return!1}return o*o/(this._radiusX*this._radiusX)+r*r/(this._radiusY*this._radiusY)<=1}}),L.ellipse=function(t,e,n,i){return new L.Ellipse(t,e,n,i)}},723:()=>{var t,e,n;t=L.Marker.prototype._initIcon,e=L.Marker.prototype._setPos,n="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){t.call(this)},_setPos:function(t){e.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,n?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var i={};(()=>{"use strict";n.d(i,{V:()=>It});class t{constructor(t){this._pl3xmap=t}get sidebarControl(){return this._sidebarControl}set sidebarControl(t){var e,n;null===(e=this._sidebarControl)||void 0===e||e.remove(),this._sidebarControl=t,null===(n=this._sidebarControl)||void 0===n||n.addTo(this._pl3xmap.map)}get blockInfoControl(){return this._blockInfoControl}set blockInfoControl(t){var e,n;null===(e=this._blockInfoControl)||void 0===e||e.remove(),this._blockInfoControl=t,null===(n=this._blockInfoControl)||void 0===n||n.addTo(this._pl3xmap.map)}get coordsControl(){return this._coordsControl}set coordsControl(t){var e,n;null===(e=this._coordsControl)||void 0===e||e.remove(),this._coordsControl=t,null===(n=this._coordsControl)||void 0===n||n.addTo(this._pl3xmap.map)}get linkControl(){return this._linkControl}set linkControl(t){var e,n;null===(e=this._linkControl)||void 0===e||e.remove(),this._linkControl=t,null===(n=this._linkControl)||void 0===n||n.addTo(this._pl3xmap.map)}}class e{constructor(t,e,n,i,s){this._name=t,this._uuid=e,this._displayName=n,this._world=i,this._position=s}get name(){return this._name}get uuid(){return this._uuid}get displayName(){return this._displayName}set displayName(t){this._displayName=t}get world(){return this._world}set world(t){this._world=t}get position(){return this._position}set position(t){this._position=t}}const s=L;var o=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};function r(t){const e=s.DomUtil.create("template");return e.innerHTML=`<svg class="svg-icon"><use href="#icon--${t}"></use></svg>`,e.content}function a(t){return fetch(t,{headers:{"Content-Disposition":"inline"}}).then((t=>o(this,void 0,void 0,(function*(){if(t.ok)return yield t.json()}))))}function l(t,e){var n;return null!==(n=new URLSearchParams(window.location.search).get(t))&&void 0!==n?n:e}function c(t){return d([t.x+.5,t.z+.5])}function d(t){return s.latLng(p(t[1]),p(t[0]))}function u(t,e){return s.latLngBounds(c(t),c(e))}function h(t){return[g(t.lng),g(t.lat)]}function p(t){return t*m()}function g(t){return t/m()}function m(){const t=It.instance.map;return 1/Math.pow(2,t.getMaxZoomOut())}function _(t){return null!=t}function f(t){const e=It.instance.map;let n=e.getPane(t);return null==n&&(n=e.createPane(t)),n}function v(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const y=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"]),b=(t,e)=>{if(t.target)if(y.has(t.key)){const n=e.indexOf(t.target);if(n<0)return;let i=n;switch(t.key){case"ArrowUp":case"ArrowLeft":i=n-1;break;case"ArrowDown":case"ArrowRight":i=n+1;break;case"Home":i=0;break;case"End":i=e.length-1}i<0?i=e.length-1:i>=e.length&&(i=0),e[i].focus(),t.preventDefault()}else if("Enter"===t.key&&t.target){const e=new MouseEvent("click",{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,altKey:t.altKey,bubbles:!0});t.target.dispatchEvent(e),t.preventDefault()}};function w(t,e){if(-1!==e.indexOf(":")){const n=e.split(":"),i=t+"."+n[0]+"."+e.split(n[0]+":")[1],s=It.instance.langPalette.get(i);if(null!=s)return s}return-1!==e.indexOf(":")&&(e=e.split(":")[1].split(".").pop().replace(/_+/g," ").replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substring(1)))),e}class x{constructor(t){this._players=new Map,this._pl3xmap=t}update(t){const n=new Set(this._players.keys());t.players.forEach((t=>{const i=this._players.get(t.uuid);if(i)i.displayName=t.displayName,i.world=t.world,i.position=t.position,n.delete(i.uuid);else{const n=new e(t.name,t.uuid,t.displayName,t.world,t.position);this._players.set(n.uuid,n),v("playeradded",n)}})),n.forEach((t=>{const e=this._players.get(t);this._players.delete(t),v("playerremoved",e)})),this.updateFollow()}updateFollow(){if(!this.follow)return;if(!this.follow.world)return;if(!this.follow.position)return;const t=this._pl3xmap.map,e=this._pl3xmap.worldManager,n=e.getWorld(this.follow.world);if(!n)return;const i=c(this.follow.position);e.currentWorld!==n?e.setWorld(n).then((()=>{t.setView(i,t.getZoom())})):t.setView(i,t.getZoom())}get players(){return this._players}get follow(){return this._follow}set follow(t){this._follow=t,v("followplayer",t)}}class k extends s.Control{constructor(t,e){super(),this._pl3xmap=t,super.options={position:e}}}class O extends k{constructor(t,e){super(t,e),this._dom=s.DomUtil.create("div"),this._blockPalette=new Map,a("tiles/blocks.gz").then((t=>{Object.entries(t).forEach((t=>{let e=t[1];e=w("block",e),this._blockPalette.set(Number(t[0]),e)}))}))}onAdd(t){return this._dom=s.DomUtil.create("div","leaflet-control leaflet-control-panel leaflet-control-blockinfo"),this._dom.dataset.label=this._pl3xmap.settings.lang.blockInfo.label,this.update(t),this._dom}update(t){var e,n,i,s;const o=this._pl3xmap.controlManager.coordsControl,r=t.getCurrentZoom()<0?0:t.getCurrentZoom(),a=o.x,l=o.z,c=1<<r,d=a>>9,u=l>>9,h=Math.floor(d/c),p=Math.floor(u/c),g=a/c&511,m=l/c&511;let _,f="unknown",v="unknown";const y=null===(e=this._pl3xmap.worldManager.currentWorld)||void 0===e?void 0:e.getBlockInfo(r,h,p);if(void 0!==y){const t=y.getBlock(512*m+g);null!=t&&(f=0==t.block?"unknown":null!==(n=this._blockPalette.get(t.block))&&void 0!==n?n:"unknown",v=0==t.biome?"unknown":null!==(s=null===(i=this._pl3xmap.worldManager.currentWorld)||void 0===i?void 0:i.biomePalette.get(t.biome))&&void 0!==s?s:"unknown",0!=t.block&&(_=t.yPos+1))}o.y=_,this._dom.innerHTML=this._pl3xmap.settings.lang.blockInfo.value.replace(/<block>/g,f.padEnd(15," ")).replace(/<biome>/g,v.padEnd(15," "))}}class E extends k{constructor(t,e){super(t,e),this._dom=s.DomUtil.create("div"),this._x=0,this._z=0,this.onEvent=t=>this.update(this._map,h(t.latlng))}onAdd(t){return this._dom=s.DomUtil.create("div","leaflet-control leaflet-control-panel leaflet-control-coordinates"),this._dom.dataset.label=this._pl3xmap.settings.lang.coords.label,t.addEventListener("mousemove",this.onEvent),this.update(t,[0,0]),this._dom}onRemove(t){t.removeEventListener("mousemove",this.onEvent)}update(t,e){var n,i,s;this.x=Math.round(e[0])-1,this.z=Math.round(e[1])-1,null===(n=this._pl3xmap.controlManager.blockInfoControl)||void 0===n||n.update(t),this._dom.innerHTML=this._pl3xmap.settings.lang.coords.value.replace(/<x>/g,this.x.toString().padStart(6," ")).replace(/<y>/g,(null!==(s=null===(i=this.y)||void 0===i?void 0:i.toString())&&void 0!==s?s:"???").padStart(2," ").padEnd(3," ")).replace(/<z>/g,this.z.toString().padEnd(6," "))}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get z(){return this._z}set z(t){this._z=t}}var j,M,C,A,T=n(854),P=n.n(T),I=n(348),z=n.n(I),S=new(P())({id:"icon--link",use:"icon--link-usage",viewBox:"0 0 269.4 271.84",content:'<symbol viewBox="0 0 269.4 271.84" xmlns="http://www.w3.org/2000/svg" id="icon--link"><path d="M110.774 86.501c-13.432 0-26.865 5.12-37.01 15.357l-58.551 59.088c-20.29 20.476-20.29 53.87 0 74.346l21.008 21.201c20.29 20.476 53.704 20.448 74.006.012l38.221-38.473a13.5 13.5 0 0 0-.064-19.092 13.5 13.5 0 0 0-19.092.062l-38.22 38.473c-10.117 10.185-25.582 10.195-35.673.012l-21.006-21.199c-10.091-10.183-10.091-26.155 0-36.338l58.55-59.086c10.092-10.183 25.57-10.183 35.66 0l10.995 11.094a13.5 13.5 0 0 0 19.092.086 13.5 13.5 0 0 0 .086-19.092l-10.992-11.094C137.639 91.62 124.206 86.5 110.774 86.5z" /><path d="M196.174 0c-13.428.002-26.857 5.117-37.008 15.336l-38.219 38.473a13.5 13.5 0 0 0 .063 19.092 13.5 13.5 0 0 0 19.091-.063l38.22-38.473c10.117-10.185 25.582-10.195 35.673-.012l21.008 21.2c10.091 10.182 10.091 26.154 0 36.337l-58.55 59.088c-10.091 10.183-25.571 10.183-35.662 0l-10.992-11.094a13.5 13.5 0 0 0-19.092-.088 13.5 13.5 0 0 0-.088 19.092l10.994 11.094c20.29 20.476 53.727 20.476 74.018 0l58.55-59.088c20.29-20.476 20.29-53.87 0-74.346l-21.007-21.2c-10.145-10.24-23.57-15.351-36.998-15.35z" /></symbol>'});z().add(S);class R extends k{constructor(t,e){super(t,e),this.onEvent=()=>{this.update()},this._dom=s.DomUtil.create("a","leaflet-control leaflet-control-button leaflet-control-link"),this._dom.appendChild(r("link"))}onAdd(t){return t.addEventListener("moveend",this.onEvent),t.addEventListener("zoomend",this.onEvent),this.update(),this._dom}onRemove(t){t.removeEventListener("moveend",this.onEvent),t.removeEventListener("zoomend",this.onEvent)}update(){var t,e;const n=this.getUrlFromView(this._pl3xmap.worldManager.currentWorld);this._dom.href=n,this._dom.title=null!==(e=null===(t=this._pl3xmap.settings)||void 0===t?void 0:t.lang.link.label)&&void 0!==e?e:"",window.history.replaceState(null,this._pl3xmap.settings.lang.title,n)}getUrlFromView(t){var e,n;const i=h(this._pl3xmap.map.getCenter()),s=this._pl3xmap.map.getCurrentZoom(),o=Math.floor(i[0]),r=Math.floor(i[1]);let a="?";return void 0!==t&&(a+=`world=${t.name}&renderer=${null!==(n=null===(e=t.currentRenderer)||void 0===e?void 0:e.label)&&void 0!==n?n:"basic"}`),`${a}&zoom=${s}&x=${o}&z=${r}`}}class U{constructor(t,e){this._key=t,this._marker=e}get key(){return this._key}get marker(){return this._marker}}class D{constructor(t,e){this.data=t,this.options=e}}class B extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{radius:p(n.radius),bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.circle(c(n.center),i))}update(t){const e=t,n=this.marker;n.setLatLng(c(e.center)),n.setRadius(p(e.radius))}}n(108);class N extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.ellipse(c(n.center),[p(n.radius.x),p(n.radius.z)],_(n.tilt)?n.tilt:0,i))}update(t){const e=t,n=this.marker;n.setLatLng(c(e.center)),n.setRadius([p(e.radius.x),p(e.radius.z)]),_(e.tilt)&&n.setTilt(e.tilt)}}n(723);class $ extends U{constructor(t){var e,n,i,o,r,a,l;function d(t){return`images/icon/registered/${t}.png`}const u=t.data;let h={};_(u.image)&&(h=Object.assign(Object.assign({},h),{iconUrl:d(u.image)})),_(u.retina)&&(h=Object.assign(Object.assign({},h),{iconRetinaUrl:d(u.retina)})),_(u.size)&&(h=Object.assign(Object.assign({},h),{iconSize:[u.size.x,u.size.z]})),_(u.anchor)&&(h=Object.assign(Object.assign({},h),{iconAnchor:[u.anchor.x,u.anchor.z]})),_(u.shadow)&&(h=Object.assign(Object.assign({},h),{shadowUrl:d(u.shadow)})),_(u.shadowRetina)&&(h=Object.assign(Object.assign({},h),{shadowRetinaUrl:d(u.shadowRetina)})),_(u.shadowSize)&&(h=Object.assign(Object.assign({},h),{shadowSize:[u.shadowSize.x,u.shadowSize.z]})),_(u.shadowAnchor)&&(h=Object.assign(Object.assign({},h),{shadowAnchor:[u.shadowAnchor.x,u.shadowAnchor.z]}));const p=null===(i=null===(n=null===(e=t.options)||void 0===e?void 0:e.tooltip)||void 0===n?void 0:n.properties)||void 0===i?void 0:i.offset,g=null===(a=null===(r=null===(o=t.options)||void 0===o?void 0:o.popup)||void 0===r?void 0:r.properties)||void 0===a?void 0:a.offset;_(p)&&(h=Object.assign(Object.assign({},h),{tooltipAnchor:p})),_(g)&&(h=Object.assign(Object.assign({},h),{popupAnchor:g}));let m=Object.assign(Object.assign({},null===(l=t.options)||void 0===l?void 0:l.properties),{rotationAngle:u.rotationAngle,rotationOrigin:u.rotationOrigin,icon:s.icon(h),bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(u.pane)){const t=f(u.pane);m=Object.assign(Object.assign({},m),{pane:t.className.split(" ")[1].split("-")[1]})}super(u.key,s.marker(c(u.point),m))}update(t,e){var n,i;const s=t,o=this.marker;o.setLatLng(c(s.point));const r=o.options;r.rotationAngle=s.rotationAngle,r.rotationOrigin=s.rotationOrigin,(null===(n=null==e?void 0:e.tooltip)||void 0===n?void 0:n.content)&&o.setTooltipContent(null===(i=null==e?void 0:e.tooltip)||void 0===i?void 0:i.content)}}class F extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{smoothFactor:1,noClip:!1,bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.polygon(F.createPolys(n),i))}update(t){const e=t;this.marker.setLatLngs(F.createPolys(e))}static createPolys(t){const e=[];return t.polygons.forEach((t=>{const n=[];t.polylines.forEach((t=>{const e=[];t.points.forEach((t=>{e.push(c(t))})),n.push(e)})),e.push(n)})),e}}class W extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{smoothFactor:1,noClip:!1,bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.polyline(W.createLines(n),i))}update(t){const e=t;this.marker.setLatLngs(W.createLines(e))}static createLines(t){const e=[];return t.polylines.forEach((t=>{const n=[];t.points.forEach((t=>{n.push(c(t))})),e.push(n)})),e}}class Z extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{smoothFactor:1,noClip:!1,bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.polygon(Z.createPoly(n),i))}update(t){const e=t;this.marker.setLatLngs(Z.createPoly(e))}static createPoly(t){const e=[];return t.polylines.forEach((t=>{const n=[];t.points.forEach((t=>{n.push(c(t))})),e.push(n)})),e}}class Y extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{smoothFactor:1,noClip:!1,bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.polyline(Y.createLine(n),i))}update(t){const e=t;this.marker.setLatLngs(Y.createLine(e))}static createLine(t){const e=[];return t.points.forEach((t=>{e.push(c(t))})),e}}class q extends U{constructor(t){var e;const n=t.data;let i=Object.assign(Object.assign({},null===(e=t.options)||void 0===e?void 0:e.properties),{smoothFactor:1,noClip:!1,bubblingMouseEvents:!0,interactive:!0,attribution:void 0});if(_(n.pane)){const t=f(n.pane);i=Object.assign(Object.assign({},i),{pane:t.className.split("-")[1]})}super(n.key,s.rectangle(u(n.point1,n.point2),i))}update(t){const e=t;this.marker.setBounds(u(e.point1,e.point2))}}class H{constructor(t){this._rgb=t,this._hex="#"+(16777215&t).toString(16).padStart(6,"0"),this._opacity=(t>>24&255)/255}get rgb(){return this._rgb}get hex(){return this._hex}get opacity(){return this._opacity}}class V{constructor(t){let e={};if(_(t.enabled)&&(e=Object.assign(Object.assign({},e),{stroke:t.enabled})),_(t.weight)&&(e=Object.assign(Object.assign({},e),{weight:t.weight})),_(t.color)){const n=new H(t.color);e=Object.assign(Object.assign({},e),{color:n.hex,opacity:n.opacity})}_(t.lineCap)&&(e=Object.assign(Object.assign({},e),{lineCap:j[t.lineCap]})),_(t.lineJoin)&&(e=Object.assign(Object.assign({},e),{lineJoin:M[t.lineJoin]})),_(t.dashArray)&&(e=Object.assign(Object.assign({},e),{dashArray:t.dashArray})),_(t.dashOffset)&&(e=Object.assign(Object.assign({},e),{dashOffset:t.dashOffset})),this._properties=e}get properties(){return this._properties}}!function(t){t[t.butt=0]="butt",t[t.round=1]="round",t[t.square=2]="square"}(j||(j={})),function(t){t[t.miter=0]="miter",t[t.round=1]="round",t[t.bevel=2]="bevel"}(M||(M={}));class X{constructor(t){let e={};if(_(t.enabled)&&(e=Object.assign(Object.assign({},e),{fill:t.enabled})),_(t.type)&&(e=Object.assign(Object.assign({},e),{fillRule:C[t.type]})),_(t.color)){const n=new H(t.color);e=Object.assign(Object.assign({},e),{fillColor:n.hex,fillOpacity:n.opacity})}this._properties=e}get properties(){return this._properties}}!function(t){t[t.nonzero=0]="nonzero",t[t.evenodd=1]="evenodd"}(C||(C={}));class G{constructor(t){this._content=_(t.content)?t.content:"";let e={};if(_(t.offset)&&(e=Object.assign(Object.assign({},e),{offset:[t.offset.x,t.offset.z]})),_(t.direction)&&(e=Object.assign(Object.assign({},e),{direction:A[t.direction]})),_(t.permanent)&&(e=Object.assign(Object.assign({},e),{permanent:t.permanent})),_(t.sticky)&&(e=Object.assign(Object.assign({},e),{sticky:t.sticky})),_(t.opacity)&&(e=Object.assign(Object.assign({},e),{opacity:t.opacity})),_(t.pane)){const n=f(t.pane);e=Object.assign(Object.assign({},e),{pane:n.className.split(" ")[1].split("-")[1]})}this._properties=e}get content(){return this._content}get properties(){return this._properties}}!function(t){t[t.right=0]="right",t[t.left=1]="left",t[t.top=2]="top",t[t.bottom=3]="bottom",t[t.center=4]="center",t[t.auto=5]="auto"}(A||(A={}));class K{constructor(t){this._content=_(t.content)?t.content:"";let e={};if(_(t.offset)&&(e=Object.assign(Object.assign({},e),{offset:[t.offset.x,t.offset.z]})),_(t.maxWidth)&&(e=Object.assign(Object.assign({},e),{maxWidth:t.maxWidth})),_(t.minWidth)&&(e=Object.assign(Object.assign({},e),{minWidth:t.minWidth})),_(t.maxHeight)&&(e=Object.assign(Object.assign({},e),{maxHeight:t.maxHeight})),_(t.autoPan)&&(e=Object.assign(Object.assign({},e),{autoPan:t.autoPan})),_(t.autoPanPaddingTopLeft)&&(e=Object.assign(Object.assign({},e),{autoPanPaddingTopLeft:[t.autoPanPaddingTopLeft.x,t.autoPanPaddingTopLeft.z]})),_(t.autoPanPaddingBottomRight)&&(e=Object.assign(Object.assign({},e),{autoPanPaddingBottomRight:[t.autoPanPaddingBottomRight.x,t.autoPanPaddingBottomRight.z]})),_(t.autoPanPadding)&&(e=Object.assign(Object.assign({},e),{autoPanPadding:[t.autoPanPadding.x,t.autoPanPadding.z]})),_(t.keepInView)&&(e=Object.assign(Object.assign({},e),{keepInView:t.keepInView})),_(t.closeButton)&&(e=Object.assign(Object.assign({},e),{closeButton:t.closeButton})),_(t.autoClose)&&(e=Object.assign(Object.assign({},e),{autoClose:t.autoClose})),_(t.closeOnEscapeKey)&&(e=Object.assign(Object.assign({},e),{closeOnEscapeKey:t.closeOnEscapeKey})),_(t.closeOnClick)&&(e=Object.assign(Object.assign({},e),{closeOnClick:t.closeOnClick})),_(t.pane)){const n=f(t.pane);e=Object.assign(Object.assign({},e),{pane:n.className.split(" ")[1].split("-")[1]})}this._properties=e}get content(){return this._content}get properties(){return this._properties}}class J{constructor(t){this._stroke=_(t.stroke)?new V(t.stroke):void 0,this._fill=_(t.fill)?new X(t.fill):void 0,this._tooltip=_(t.tooltip)?new G(t.tooltip):void 0,this._popup=_(t.popup)?new K(t.popup):void 0}get properties(){var t,e;return Object.assign(Object.assign({},null===(t=this._stroke)||void 0===t?void 0:t.properties),null===(e=this._fill)||void 0===e?void 0:e.properties)}get tooltip(){return this._tooltip}get popup(){return this._popup}}class Q extends s.LayerGroup{constructor(t,e,n,i,s,o,r,a,l){if(super(void 0,{attribution:void 0}),this._markers=new Map,this._key=t,this._label=e,this._updateInterval=1e3*(n<1?1:n),this._showControls=i,this._defaultHidden=s,this._priority=o,this._zIndex=r,this._pane=a,this._css=l,this.setZIndex(r),_(a)){const t=f(a);t.style.zIndex=String(r),this.options.pane=t.className.split("-")[1]}_(l)&&function(t,e){document.head.insertAdjacentHTML("beforeend",`<style id="${e}">${t}</style>`)}(l,t),v("overlayadded",this)}get key(){return this._key}get label(){return this._label}get updateInterval(){return this._updateInterval}get showControls(){return this._showControls}get defaultHidden(){return this._defaultHidden}get priority(){return this._priority}get zIndex(){return this._zIndex}get pane(){return this._pane}get css(){return this._css}update(t){a(`tiles/${t.name}/markers/${this._key}.json`).then((e=>{const n=new Set(this._markers.keys());for(const t in Object.keys(e)){const i=this._markers.get(e[t].data.key);if(i){const s=e[t],o=_(s.options)?new J(s.options):void 0;i.update(s.data,o),n.delete(i.key)}else{const n=this.parseMarker(e[t]);n&&(this._markers.set(n.key,n),n.marker.addTo(this),v("markeradded",n))}}n.forEach((t=>{const e=this._markers.get(t);e&&(this._markers.delete(t),e.marker.remove(),this.removeLayer(e.marker),v("markerremoved",e))})),this._timer=setTimeout((()=>this.update(t)),this._updateInterval)}))}unload(){var t,e;clearTimeout(this._timer),t=this._key,null===(e=document.getElementById(t))||void 0===e||e.remove(),this._markers.clear(),this.clearLayers(),this.removeFrom(It.instance.map),v("overlayremoved",this)}parseMarker(t){const e=_(t.options)?new J(t.options):void 0,n=Q.TYPES[t.type],i=n?n(new D(t.data,e)):void 0;if(null==i?void 0:i.marker){const t=null==e?void 0:e.popup,n=null==e?void 0:e.tooltip;t&&i.marker.bindPopup((()=>t.content),t.properties),n&&i.marker.bindTooltip((()=>n.content),n.properties)}return i}}Q.TYPES={circ:t=>new B(t),elli:t=>new N(t),icon:t=>new $(t),multipoly:t=>new F(t),multiline:t=>new W(t),poly:t=>new Z(t),line:t=>new Y(t),rect:t=>new q(t)};class tt{constructor(t,e){this._block=t>>>22,this._biome=(4190208&t)>>>12,this._yPos=4095&t,this._minY=e}get block(){return this._block}get biome(){return this._biome}get yPos(){return this._yPos+this._minY}}class et{constructor(t){this._data=t}get minY(){return this.getInt(8)}getBlock(t){return new tt(this.getInt(12+4*t),this.minY)}getInt(t){let e=0;for(let n=0;n<4;n++)e|=(255&this._data[t+n])<<8*n;return e}}class nt{constructor(t,e){this._label=t,this._value=e}get label(){return this._label}get value(){return this._value}}class it extends s.TileLayer{constructor(t,e,n){var i;super(`tiles/${e.name}/{z}/${n.label}/{x}_{y}.${null===(i=t.settings)||void 0===i?void 0:i.format}`,{tileSize:512,noWrap:!0,minNativeZoom:0,maxNativeZoom:e.zoom.maxOut,maxZoom:e.zoom.maxOut+e.zoom.maxIn,zoomOffset:-e.zoom.maxIn}),this._world=e,this._renderer=n,this.addEventListener("tileload",(t=>{const n=e.settings.zoom.maxOut-t.coords.z;e.loadBlockInfo(n,t.coords.x,t.coords.y)})),this.addEventListener("tileunload",(t=>{const n=e.settings.zoom.maxOut-t.coords.z;e.unsetBlockInfo(n,t.coords.x,t.coords.y)})),this.setZIndex(0)}get world(){return this._world}get renderer(){return this._renderer}_getZoomForUrl(){const t=this._tileZoom;return this.options.maxZoom-t+this.options.zoomOffset}createTile(t,e){const n=s.DomUtil.create("img");return s.DomEvent.on(n,"load",(()=>{URL.revokeObjectURL(n.src),this._tileOnLoad(e,n)})),s.DomEvent.on(n,"error",s.Util.bind(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),fetch(this.getTileUrl(t)).then((t=>{t.ok?t.blob().then((t=>{const e=new FileReader;e.readAsDataURL(t),e.onload=()=>n.src=String(e.result)})):this._tileOnError(e,n,new Error(t.statusText))})).catch((t=>this._tileOnError(e,n,t))),n}}class st{constructor(t,e,n){this._currentLayer=0,this._tileLayer1=this.createTileLayer(t,e,n),this._tileLayer2=this.createTileLayer(t,e,n)}createTileLayer(t,e,n){return new it(t,e,n).addEventListener("load",(()=>{this.switchTileLayer()}))}switchTileLayer(){1==this._currentLayer?(this._tileLayer1.setZIndex(0),this._tileLayer2.setZIndex(1),this._currentLayer=2):(this._tileLayer1.setZIndex(1),this._tileLayer2.setZIndex(0),this._currentLayer=1)}updateTileLayer(){1==this._currentLayer?this._tileLayer2.redraw():this._tileLayer1.redraw()}addTo(t){this._tileLayer1.addTo(t),this._tileLayer2.addTo(t)}remove(){this._tileLayer1.remove(),this._tileLayer2.remove()}}class ot{constructor(t,e,n){this._rendererLayers=new Map,this._markerLayers=[],this._biomePalette=new Map,this._blockInfo=new Map,this._loaded=!1,this._pl3xmap=t,this._settings=n}load(){return this._loaded?Promise.resolve(this):(a(`tiles/${this.name}/biomes.gz`).then((t=>{Object.entries(t).forEach((t=>{let e=t[1];e=w("biome",e),this._biomePalette.set(Number(t[0]),e)}))})),new Promise((t=>{a(`tiles/${this.name}/settings.json`).then((e=>{this._loaded=!0,this.settings.spawn=e.spawn,this.settings.center=e.center,this.settings.zoom=e.zoom,this.settings.tileUpdateInterval=e.tileUpdateInterval,this.settings.ui=e.ui,this.settings.renderers.forEach((t=>{this._rendererLayers.set(t,new st(this._pl3xmap,this,t))})),t(this)}))})))}unload(){var t;clearTimeout(this._timer),this._markerLayers.forEach((t=>t.unload())),this._markerLayers=[],null===(t=this._currentRendererLayer)||void 0===t||t.remove(),this._currentRendererLayer=void 0,this._currentRenderer=void 0}loadMarkers(){a(`tiles/${this.name}/markers.json`).then((t=>{t.forEach((t=>{const e=new Q(t.key,t.label,t.updateInterval,t.showControls,t.defaultHidden,t.priority,t.zIndex,t.pane,t.css);this._markerLayers.push(e),e.update(this)}))}))}loadBlockInfo(t,e,n){this.settings.ui.blockinfo&&function(t){return fetch(t,{headers:{"Content-Disposition":"inline"}}).then((t=>o(this,void 0,void 0,(function*(){if(t.ok)return yield t.arrayBuffer()}))))}(`tiles/${this.name}/${t}/blockinfo/${e}_${n}.pl3xmap.gz`).then((i=>{this.setBlockInfo(t,e,n,i)}))}getBlockInfo(t,e,n){var i;return null===(i=this.blockInfo.get(t<0?0:t))||void 0===i?void 0:i.get(`${e}_${n}`)}setBlockInfo(t,e,n,i){let s=this.blockInfo.get(t<0?0:t);null==s&&(s=new Map,this.blockInfo.set(t,s));const o=null==i?null:new et(new Uint8Array(i));null==o?s.delete(`${e}_${n}`):s.set(`${e}_${n}`,o)}unsetBlockInfo(t,e,n){var i;null===(i=this.blockInfo.get(t))||void 0===i||i.delete(`${e}_${n}`)}getRendererLayer(t){return this._rendererLayers.get(t)}get currentRendererLayer(){return this._currentRendererLayer}get currentRenderer(){return this._currentRenderer}setRenderer(t){var e;clearTimeout(this._timer),t instanceof rt||this.renderers.forEach((e=>{e.label==t&&(t=e)})),null===(e=this._currentRendererLayer)||void 0===e||e.remove(),this._currentRenderer=this.settings.renderers.indexOf(t)>-1?t:this.settings.renderers[0],this._currentRendererLayer=this._rendererLayers.get(this._currentRenderer),this._currentRendererLayer.addTo(this._pl3xmap.map),this.tick(),v("rendererselected",this)}resetRenderer(t){this.setRenderer(null!=t?t:this.settings.renderers[0])}get settings(){return this._settings}get name(){return this.settings.name}get displayName(){return this.settings.displayName}get type(){return this.settings.type}get order(){return this.settings.order}get renderers(){return this.settings.renderers}get spawn(){return this.settings.spawn}get center(){return this.settings.center}get zoom(){return this.settings.zoom}get markerLayers(){return this._markerLayers}get blockInfo(){return this._blockInfo}get biomePalette(){return this._biomePalette}get background(){switch(this.type){case"nether":return"url('images/sky/nether.png')";case"the_end":return"url('images/sky/the_end.png')";default:return"url('images/sky/overworld.png')"}}tick(){var t;null===(t=this.currentRendererLayer)||void 0===t||t.updateTileLayer(),this._timer=setTimeout((()=>this.tick()),1e3*this.settings.tileUpdateInterval)}}class rt extends nt{constructor(t,e,n){super(t,e),this._icon=n}get icon(){return this._icon}}var at=function(t,e,n,i){return new(n||(n=Promise))((function(s,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};class lt{constructor(t){this._worlds=new Map,this._pl3xmap=t}init(t){return at(this,void 0,void 0,(function*(){const e=[];t.worldSettings.forEach((t=>{const n=new ot(this._pl3xmap,this,t);e.push(n)})),e.sort(((t,e)=>t.settings.order-e.settings.order)).forEach((t=>{this._worlds.set(t.name,t),v("worldadded",t)}));const n=l("world",this._worlds.keys().next().value),i=this._worlds.get(n);i&&(yield this.setWorld(i,l("renderer",void 0)))}))}get currentWorld(){return this._currentWorld}getWorld(t){return t=t.replace(/:/g,"-"),this._worlds.get(t)}setWorld(t,e,n){return at(this,void 0,void 0,(function*(){return t.load().then((()=>{var i;if(t===this._currentWorld&&e===this._currentWorld.currentRenderer)return;t!==this._currentWorld&&(null===(i=this._currentWorld)||void 0===i||i.unload(),this._currentWorld=t,t.loadMarkers(),v("worldselected",t),document.getElementById("map").style.background=t.background),t.resetRenderer(e);const s=-1===t.center.x?t.spawn.x:t.center.x,o=-1===t.center.z?t.spawn.z:t.center.z;this._pl3xmap.map.centerOn(n?s:l("x",s),n?o:l("z",o),n?t.zoom.default:l("zoom",t.zoom.default));const r=t.settings.ui;this._pl3xmap.controlManager.linkControl=r.link?new R(this._pl3xmap,r.link):void 0,this._pl3xmap.controlManager.coordsControl=r.coords?new E(this._pl3xmap,r.coords):void 0,this._pl3xmap.controlManager.blockInfoControl=r.blockinfo?new O(this._pl3xmap,r.blockinfo):void 0;const a=this._pl3xmap.map.attributionControl.getContainer();a&&(a.style.display=r.attribution?"inline-block":"none")}))}))}}var ct=new(P())({id:"icon--layers",use:"icon--layers-usage",viewBox:"0 0 234.46 247.78",content:'<symbol viewBox="0 0 234.46 247.78" xmlns="http://www.w3.org/2000/svg" id="icon--layers"><path d="m130.947 2.453 100.256 70.392c4.44 3.118 4.327 7.968-.254 10.876l-111.155 70.56c-4.58 2.908-11.842 2.739-16.282-.379L3.257 83.51c-4.44-3.117-4.327-7.968.253-10.875l111.155-70.56c4.58-2.908 11.842-2.74 16.282.378z" /><path d="M217.846 154.897 119.79 217.14c-4.58 2.907-11.843 2.738-16.283-.38l-86.895-61.013-13.104 8.317c-4.58 2.908-4.693 7.757-.253 10.875l100.252 70.393c4.44 3.117 11.703 3.285 16.284.378l111.157-70.559c4.58-2.907 4.694-7.759.254-10.876z" /><path d="m217.846 109.185-98.048 62.24c-4.58 2.908-11.843 2.739-16.283-.378L16.62 110.033 3.517 118.35c-4.58 2.908-4.694 7.759-.254 10.877l100.253 70.39c4.44 3.118 11.703 3.288 16.283.38l111.158-70.56c4.58-2.907 4.693-7.757.253-10.875z" /></symbol>'});z().add(ct);class dt extends s.Control.Layers{constructor(t){super({},{},{hideSingleBase:!0,sortLayers:!0,sortFunction:(t,e,n,i)=>{if(t instanceof Q&&e instanceof Q){const s=t.priority-e.priority;if(0!==s)return s;n=t.label,i=e.label}return n<i?-1:i<n?1:0}}),this._button=s.DomUtil.create("button"),this._content=s.DomUtil.create("div"),this._skeleton=s.DomUtil.create("p"),this._container=s.DomUtil.create("div"),this._list=s.DomUtil.create("fieldset","menu"),this._pl3xmap=t,this._button.type="button",this._button.setAttribute("aria-expanded","false"),this._button.setAttribute("aria-controls","sidebar__layers"),this._button.appendChild(r("layers")),this._button.setAttribute("aria-label",t.settings.lang.layers.label),this._button.title=t.settings.lang.layers.label,this._content.hidden=!0,this._content.id="sidebar__layers",this._content.setAttribute("aria-hidden","true"),this.initEvents()}initEvents(){window.addEventListener("overlayadded",(t=>{t.detail.showControls&&this.addOverlay(t.detail,t.detail.label),t.detail.defaultHidden||t.detail.addTo(this._map),this._update()})),window.addEventListener("overlayremoved",(t=>{t.detail.removeFrom(this._map),this.removeLayer(t.detail),this._update()})),window.addEventListener("worldselected",(()=>{this._layers=[],this._update()}))}_initLayout(){const t=s.DomUtil.create("h2","",this._content);t.innerText=this._pl3xmap.settings.lang.layers.label,t.id="layers-heading",this._skeleton.innerText=this._pl3xmap.settings.lang.layers.value,this._skeleton.id="layers-skeleton",this._skeleton.tabIndex=-1,this._list.setAttribute("aria-labelledby","overlay-layers-heading"),this._list.setAttribute("role","listbox"),this._container.appendChild(this._list),this._content.appendChild(this._skeleton),this._content.appendChild(this._container)}_update(){if(!this._map)return this;s.DomUtil.empty(this._list),this._layerControlInputs=[],this._layers.forEach((t=>{this._addItem(t)}));const t=this._layers.length>0;return this._container.hidden=!t,this._skeleton.hidden=t,this}_addItem(t){const e=s.DomUtil.create("label"),n=s.DomUtil.create("input");return n.type="checkbox",n.name="overlays",n.layerId=s.Util.stamp(t.layer),n.id=e.htmlFor=`overlay-${n.layerId}`,n.defaultChecked=this._map.hasLayer(t.layer),this._layerControlInputs.push(n),s.DomEvent.on(n,"click",this._onInputClick,this),e.innerText=t.name,this._list.appendChild(n),this._list.appendChild(e),this._checkDisabledLayers(),e}expand(){return this}collapse(){return this}onActivate(){this._container.hidden?this._skeleton.focus():this._list.querySelector("input").focus()}get button(){return this._button}get content(){return this._content}get id(){return"layers"}}class ut{constructor(t,e){this._button=s.DomUtil.create("button"),this._content=s.DomUtil.create("div"),this._pl3xmap=t,this._id=e,this._button.type="button",this._button.setAttribute("aria-expanded","false"),this._button.setAttribute("aria-controls",`sidebar__${this._id}`),this._content.hidden=!0,this._content.id=`sidebar__${this._id}`,this._content.setAttribute("aria-hidden","true")}get button(){return this._button}get content(){return this._content}get id(){return this._id}onActivate(){if(this._content.children.length){const t=this._content.firstElementChild;t.tabIndex=-1,t.focus()}}}var ht=new(P())({id:"icon--players",use:"icon--players-usage",viewBox:"0 0 258.05 271.18",content:'<symbol viewBox="0 0 258.05 271.18" xmlns="http://www.w3.org/2000/svg" id="icon--players"><path transform="scale(.75)" d="M115.9.336c-38.033 0-68.865 31.036-68.865 69.32 0 33.275 23.296 61.06 54.363 67.766 5.86-43.301 38.447-78.411 80.457-87.72C173.34 21.149 147.041.337 115.9.337z" /><path d="M95.745 173.72c-2.582 0-4.277 1.426-7.451 3.963-6.024 4.835-13.794 12.383-17.453 16.954-9.996 12.49-17.467 29.232-20.862 46.753-1.88 9.697-2.612 23.496-1.355 25.53 1.462 2.365 6.553 4.245 14.492 4.245 60.371.021 124.23.005 179.81 0 7.94 0 13.03-1.88 14.492-4.245 1.257-2.034.525-15.833-1.354-25.53-3.395-17.52-10.866-34.264-20.862-46.753-3.658-4.57-11.43-12.12-17.453-16.954-3.174-2.537-4.868-3.963-7.45-3.963-1.49 0-3.196 1.051-5.583 2.9-14.03 11.747-32.038 18.837-51.695 18.918-19.657-.081-37.665-7.172-51.695-18.918-2.389-1.849-4.095-2.9-5.584-2.9z" /><g stroke-width=".921"><path d="M206.11 77.176c0 42.623-34.327 77.176-76.671 77.176-42.344 0-76.671-34.553-76.671-77.176C52.768 34.553 87.095 0 129.439 0c42.344 0 76.671 34.553 76.671 77.176" transform="translate(47.674 50.748) scale(.81399)" /><path d="M129.44-.375c-42.548 0-77.045 34.726-77.045 77.551 0 42.824 34.497 77.551 77.045 77.551s77.047-34.726 77.047-77.551S171.988-.375 129.44-.375zm0 .75c42.14 0 76.297 34.379 76.297 76.801 0 42.422-34.157 76.801-76.297 76.801s-76.295-34.379-76.295-76.801C53.145 34.754 87.3.375 129.44.375z" transform="translate(47.674 50.748) scale(.81399)" /></g><path transform="scale(.75)" d="M52.684 136.03c-2.85 0-4.718 1.573-8.22 4.373-6.647 5.334-15.222 13.665-19.259 18.709-11.03 13.781-19.273 32.255-23.02 51.588C.112 221.4-.698 236.628.69 238.872c1.613 2.61 7.232 4.684 15.992 4.684 21.846.008 42.85-.001 65.066 0 6.605-7.58 15.31-15.7 23.461-22.242l.012-.012.016-.014c2.044-1.635 4.034-3.417 7.6-5.517 1.973-1.163 4.658-2.296 7.571-3.086-11.19-15.375-18.287-33.905-19.69-53.941-15.745-2.765-30.084-9.644-41.872-19.514-2.635-2.04-4.516-3.2-6.16-3.2z" /></symbol>'});z().add(ht);class pt extends ut{constructor(t){super(t,"players"),this._players=new Map;const e=t.settings.lang;this._button.appendChild(r("players")),this._button.setAttribute("aria-label",e.worlds.label),this._button.title=e.players.label,this._heading=s.DomUtil.create("h2","",this._content),this._heading.innerText=e.players.label,this._heading.id="players-heading",this._skeleton=s.DomUtil.create("p","",this._content),this._skeleton.innerText=e.players.value,this._skeleton.tabIndex=-1,this._list=s.DomUtil.create("fieldset","menu",this._content),this._list.setAttribute("aria-labelledby","players-heading"),this._list.setAttribute("role","radiogroup"),this.initEvents(),this._update()}initEvents(){addEventListener("playeradded",(t=>{this.createListItem(t.detail),this._update()})),addEventListener("playerremoved",(t=>{this.removeListItem(t.detail),this._update()})),addEventListener("followplayer",(t=>{this._players.forEach(((e,n)=>{e.input.checked=n===t.detail}))})),this._list.addEventListener("keydown",(t=>b(t,Array.from(this._list.elements))))}_update(){var t,e,n;const i=this._pl3xmap.settings,s=String(_(null==i?void 0:i.players)?Object.keys(i.players).length:"???"),o=String(null!==(t=null==i?void 0:i.maxPlayers)&&void 0!==t?t:"???"),r=null!==(n=null===(e=null==i?void 0:i.lang.players)||void 0===e?void 0:e.label.replace("<online>",s).replace("<max>",o))&&void 0!==n?n:"Players";this._heading.innerText=r,this._button.title=r}createListItem(t){const e=s.DomUtil.create("input","players"),n=s.DomUtil.create("label","");n.style.backgroundImage=`url('images/skins/3D/${t.uuid}.png')`,n.innerText=t.displayName,e.id=n.htmlFor=`${t.uuid}`,e.type="radio",e.name="player",e.checked=!1,e.addEventListener("click",(()=>{return t=this,n=void 0,s=function*(){const t=this._pl3xmap.playerManager,n=t.players.get(e.id);n===t.follow?t.follow=void 0:t.follow=n,t.updateFollow()},new((i=void 0)||(i=Promise))((function(e,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,a)}l((s=s.apply(t,n||[])).next())}));var t,n,i,s})),this._players.set(t,{input:e,label:n}),this._skeleton.hidden=!0,this._list.appendChild(e),this._list.appendChild(n),Array.from(this._players.values()).sort(((t,e)=>t.label.innerText<e.label.innerText?-1:t.label.innerText>e.label.innerText?1:0)).forEach((t=>{t.input.remove(),t.label.remove(),this._list.appendChild(t.input),this._list.appendChild(t.label)}))}removeListItem(t){const e=this._players.get(t);e&&(e.label.remove(),e.input.remove(),this._players.delete(t),this._players.size||(this._skeleton.hidden=!1))}onActivate(){var t;this._players.size?null===(t=this._list.querySelector("input:checked"))||void 0===t||t.focus():this._skeleton.focus()}}var gt=new(P())({id:"icon--maps",use:"icon--maps-usage",viewBox:"0 0 268.83 266.53",content:'<symbol viewBox="0 0 268.83 266.53" xmlns="http://www.w3.org/2000/svg" id="icon--maps"><path d="M5.235.662C2.153.606 0 2.945 0 6.912v216.577c0 5.288 3.828 11.41 8.582 13.725l57.835 28.165c4.755 2.316 8.582-.078 8.582-5.367V43.434c0-5.288-3.827-11.41-8.582-13.727L8.582 1.544C7.394.965 6.262.681 5.235.662zm32.283 135.96c14.394 0 26.062 11.669 26.062 26.063 0 14.394-24.167 59.55-26.062 57.654-1.854 1.854-26.063-43.26-26.063-57.654 0-14.394 11.669-26.063 26.063-26.063zM202.388 1.013l57.833 28.165c4.755 2.315 8.583 8.437 8.583 13.726v216.58c0 5.29-3.828 7.683-8.583 5.367l-57.833-28.164c-4.755-2.316-8.583-8.438-8.583-13.727V6.38c0-5.289 3.828-7.682 8.583-5.367zM172.012.39c-1.051-.035-2.209.191-3.426.709l-68.342 29.053c-4.867 2.07-8.786 7.993-8.786 13.282V260.01c0 5.29 3.919 7.88 8.786 5.811l68.342-29.053c4.867-2.07 8.786-7.991 8.786-13.28V6.91c0-3.967-2.204-6.417-5.36-6.521zm-36.949 41.216c14.394 0 26.063 11.668 26.063 26.062 0 14.394-24.168 59.55-26.063 57.655C133.209 127.177 109 82.063 109 67.668c0-14.394 11.669-26.062 26.063-26.062z" /><path d="M48.573 162.689a11.056 11.056 0 0 1-11.056 11.056 11.056 11.056 0 0 1-11.056-11.056 11.056 11.056 0 0 1 11.056-11.056 11.056 11.056 0 0 1 11.056 11.056zm97.547-95.02a11.056 11.056 0 0 1-11.057 11.056 11.056 11.056 0 0 1-11.056-11.056 11.056 11.056 0 0 1 11.056-11.056 11.056 11.056 0 0 1 11.056 11.056z" /></symbol>'});z().add(gt);class mt extends ut{constructor(t){super(t,"worlds"),this._worlds=new Map;const e=t.settings.lang;this._button.appendChild(r("maps")),this._button.setAttribute("aria-label",e.worlds.label),this._button.title=e.worlds.label;const n=s.DomUtil.create("h2","",this._content);n.innerText=e.worlds.label,n.id="worlds-heading",this._skeleton=s.DomUtil.create("p","",this._content),this._skeleton.innerText=e.worlds.value,this._skeleton.tabIndex=-1,this._list=s.DomUtil.create("fieldset","menu",this._content),this._list.setAttribute("aria-labelledby","worlds-heading"),this._list.setAttribute("role","radiogroup"),this.initEvents()}initEvents(){addEventListener("worldadded",(t=>this.createListItem(t.detail))),addEventListener("worldremoved",(t=>this.removeListItem(t.detail))),addEventListener("rendererselected",(t=>{this._worlds.get(t.detail).inputs.get(t.detail.currentRenderer).checked=!0})),this._list.addEventListener("keydown",(t=>b(t,Array.from(this._list.elements))))}createListItem(t){const e=s.DomUtil.create("fieldset"),n=s.DomUtil.create("legend");n.innerText=t.displayName,e.appendChild(n);const i=new Map;t.renderers.forEach((n=>{const o=s.DomUtil.create("input"),r=s.DomUtil.create("label");e.appendChild(o),e.appendChild(r),r.style.backgroundImage=`url('images/icon/registered/${n.icon}.png')`,r.title=n.value,o.id=r.htmlFor=`${t.name}-${n.label}`,o.type="radio",o.name="world",o.checked=!1,o.classList.add("renderer"),o.addEventListener("click",(e=>{return i=this,s=void 0,r=function*(){this._pl3xmap.worldManager.setWorld(t,n,t!==this._pl3xmap.worldManager.currentWorld).catch((()=>e.preventDefault()))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{l(r.next(t))}catch(t){e(t)}}function a(t){try{l(r.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(n,a)}l((r=r.apply(i,s||[])).next())}));var i,s,o,r})),i.set(n,o)})),this._worlds.set(t,{fieldset:e,inputs:i}),this._skeleton.hidden=!0,this._list.appendChild(e)}removeListItem(t){const e=this._worlds.get(t);e&&(e.fieldset.remove(),this._worlds.delete(t),this._worlds.size||(this._skeleton.hidden=!1))}onActivate(){this._worlds.size?this._list.querySelector("input:checked").focus():this._skeleton.focus()}}class _t extends s.Control{constructor(t){super({position:"topright"}),this._tabs=new Set,this._expanded=!1,this._container=s.DomUtil.create("div"),this._container.id="sidebar",this._buttons=s.DomUtil.create("header","",this._container),this._buttons.id="sidebar__buttons",this._content=s.DomUtil.create("section","",this._container),this._content.id="sidebar__content",s.DomEvent.disableClickPropagation(this._container),s.DomEvent.disableScrollPropagation(this._container),this.addTab(new mt(t)),this.addTab(new dt(t)),this.addTab(new pt(t))}onAdd(t){for(const e of this._tabs)e.onAdd&&e.onAdd(t);return this._container}toggle(){this._expanded?this.collapse():this.expand()}expand(){this._expanded=!0,this._container.classList.add("sidebar--expanded"),this._content.setAttribute("aria-hidden","false")}collapse(){this._currentTab&&this.deactivateTab(this._currentTab,!0),this._expanded=!1,this._container.classList.remove("sidebar--expanded"),this._content.setAttribute("aria-hidden","true")}addTab(t){this._tabs.has(t)||(this._tabs.add(t),t.button.addEventListener("click",(()=>this.toggleTab(t))),this._buttons.appendChild(t.button),t.content.addEventListener("keydown",(t=>{"Escape"===t.key&&this.collapse()})),this._content.appendChild(t.content))}removeTab(t){this._tabs.has(t)&&(this.deactivateTab(t,!1),t.button.remove())}toggleTab(t){this._currentTab===t?this.collapse():this.activateTab(t)}activateTab(t){this._expanded||this.expand(),this._currentTab&&this.deactivateTab(this._currentTab,!1),t.button.setAttribute("aria-expanded","true"),t.content.hidden=!1,t.content.setAttribute("aria-hidden","false"),this._currentTab=t,t.onActivate&&t.onActivate()}deactivateTab(t,e){t===this._currentTab&&(t.button.setAttribute("aria-expanded","false"),t.content.hidden=!0,t.content.setAttribute("aria-hidden","true"),this._currentTab=void 0,e&&t.button.focus(),t.onDeactivate&&t.onDeactivate())}}class ft extends s.Map{constructor(t){super("map",{crs:s.Util.extend(s.CRS.Simple,{transformation:new s.Transformation(1,0,1,0)}),center:[0,0],attributionControl:!0,preferCanvas:!0}),this.on("mousedown",(()=>{t.playerManager.follow=void 0})),this.attributionControl.setPrefix("<a href='https://modrinth.com/plugin/pl3xmap/'>Pl3xMap &copy; 2020-2023</a>"),this._pl3xmap=t}_initControlPos(){this._controlContainer=s.DomUtil.create("div","leaflet-control-container",this._container);const t=this._controlCorners={},e=s.DomUtil.create("div","leaflet-control-container-top",this._controlContainer),n=s.DomUtil.create("div","leaflet-control-container-bottom",this._controlContainer);function i(i,o){t[`${i}${o}`]=s.DomUtil.create("div",`leaflet-${i} leaflet-${o}`,"top"===i?e:n)}i("top","left"),i("top","center"),i("top","right"),i("bottom","left"),i("bottom","center"),i("bottom","right")}centerOn(t,e,n){this.setView(d([t,e]),this.getMaxZoomOut()-n)}getMaxZoomOut(){var t,e;return null!==(e=null===(t=this._pl3xmap.worldManager.currentWorld)||void 0===t?void 0:t.zoom.maxOut)&&void 0!==e?e:0}getCurrentZoom(){return this.getMaxZoomOut()-this.getZoom()}}var vt=n(379),yt=n.n(vt),bt=n(795),wt=n.n(bt),xt=n(569),kt=n.n(xt),Ot=n(565),Lt=n.n(Ot),Et=n(216),jt=n.n(Et),Mt=n(589),Ct=n.n(Mt),At=n(962),Tt=n.n(At),Pt={};Pt.styleTagTransform=Ct(),Pt.setAttributes=Lt(),Pt.insert=kt().bind(null,"head"),Pt.domAPI=wt(),Pt.insertStyleElement=jt(),yt()(Tt(),Pt),Tt()&&Tt().locals&&Tt().locals,window.onload=function(){window.pl3xmap=new It};class It{constructor(){this._langPalette=new Map,It._instance=this,this._map=new ft(this),this._controlManager=new t(this),this._playerManager=new x(this),this._worldManager=new lt(this),a("tiles/settings.json").then((t=>{this._settings=t,document.title=this._settings.lang.title,a("lang/"+this._settings.lang.langFile).then((t=>{Object.entries(t).forEach((t=>{this._langPalette.set(t[0],t[1])}))})),this.controlManager.sidebarControl=new _t(this);const e=this.worldManager.init(this._settings);return this.update(),e}))}static get instance(){return It._instance}update(){a("tiles/settings.json").then((t=>{this._settings=t,this.playerManager.update(this._settings),this._timer=setTimeout((()=>this.update()),1e3)}))}get map(){return this._map}get controlManager(){return this._controlManager}get playerManager(){return this._playerManager}get worldManager(){return this._worldManager}get langPalette(){return this._langPalette}get settings(){return this._settings}}})()})();
//# sourceMappingURL=pl3xmap.js.map